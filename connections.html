<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Valentine Connections</title>
  <!-- Comic-style font -->
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      text-align: center;
      background: url('https://media.tenor.com/goY0VJNhQSIAAAAd/bleh-bleh-cat.gif');
      background-size: 200px 200px;
      background-repeat: repeat;
      position: relative;
      color: #b3003b;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,192,203,0.4);
      z-index: -1;
    }
    h1 {
      margin-top: 20px;
      font-family: 'Bangers', cursive;
      font-size: 3.5em;
      color: #b3003b;
      text-shadow: 3px 3px #fff0f5, 5px 5px #ff4d6d;
      letter-spacing: 2px;
      animation: wave 2s infinite ease-in-out;
      display: inline-block;
    }
    @keyframes wave {
      0%   { transform: rotate(-2deg) translateY(0); }
      25%  { transform: rotate(2deg) translateY(-5px); }
      50%  { transform: rotate(-2deg) translateY(0); }
      75%  { transform: rotate(2deg) translateY(5px); }
      100% { transform: rotate(-2deg) translateY(0); }
    }

    #grid {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 30px auto;
      gap: 10px;
    }
    .word-grid {
      display: grid;
      grid-template-columns: repeat(4, 160px); /* bigger grid */
      gap: 15px;
      justify-content: center;
    }
    .cell {
      border: 2px solid #b3003b;
      background: #fff0f5;
      padding: 30px;
      cursor: pointer;
      border-radius: 20px;
      font-size: 1.2em;
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
    }
    .cell:hover {
      transform: scale(1.08);
      box-shadow: 0 0 10px rgba(255,105,180,0.6);
    }
    .cell::after {
      content: "ðŸ’–";
      position: absolute;
      top: -10px; right: -10px;
      font-size: 0.8em;
      opacity: 0.6;
    }
    .selected { background: #ffb6c1; }
    .row {
      display: flex;
      justify-content: center;
      margin: 5px auto;
      padding: 10px;
      border-radius: 12px;
      color: white;
      font-weight: bold;
      width: 500px;
    }
    .yellow { background: #c9b458; }
    .blue   { background: #4a90e2; }
    .green  { background: #6aaa64; }
    .purple { background: #9b59b6; }
    .message {
      margin-top: 20px;
      font-size: 1.2em;
      color: #b3003b;
    }
    #chances {
      margin-top: 20px;
      font-size: 1.2em;
      color: #b3003b;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff0f5;
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      animation: pop 0.4s ease;
      position: relative;
    }
    .modal-content h2 {
      color: #b3003b;
      font-size: 2em;
    }
    .modal-content button {
      margin-top: 20px;
      padding: 10px 20px;
      background: #ff4d6d;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
    }
    .modal-content img {
      margin-top: 15px;
      width: 220px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .modal-content::before {
      content: "ðŸ’– ðŸ’• ðŸ’˜";
      position: absolute;
      top: -30px; left: 50%;
      transform: translateX(-50%);
      font-size: 1.5em;
      animation: floatHearts 2s infinite alternate;
    }
    @keyframes pop {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    @keyframes floatHearts {
      from { transform: translateX(-50%) translateY(0); }
      to { transform: translateX(-50%) translateY(-10px); }
    }
  </style>
</head>
<body>
  <h1>ðŸ’– Valentine Connections ðŸ’–</h1>
  <div id="grid">
    <div class="word-grid" id="wordGrid"></div>
  </div>
  <div class="message" id="message"></div>
  <div id="chances">Chances left: 4</div>

  <div id="winModal" class="modal">
    <div class="modal-content">
      <h2>ðŸ’˜ You solved all categories! ðŸ’˜</h2>
      <p>Time to unlock the memories...</p>
      <img src="https://media1.tenor.com/m/V30K6aGxJSYAAAAC/stunned-wow.gif" alt="Stunned Wow">
      <br>
      <button onclick="goToMemories()">Go to Memories</button>
    </div>
  </div>

  <script>
    const categories = {
      "Things monke does to rat ðŸ˜‰ðŸ˜‰": {words:["spoon","bite","kiss","intimidate"], color:"yellow"},
      "Half of restaurant names we've been to ðŸðŸ˜˜": {words:["king","lord","granny","hard"], color:"blue"},
      "Phrases to describe my big fat throbbing dick ðŸ†ðŸ˜‹": {words:["genie's lamp","leftist","glittery","marwadi thunder"], color:"green"},
      "Words on the day rat lost his wordles â˜ ï¸ðŸ¤£ðŸ™": {words:["detox","knell","cliff","maker"], color:"purple"}
    };

    let words = Object.values(categories).map(c => c.words).flat();
    words = words.sort(() => Math.random() - 0.5);

    const wordGrid = document.getElementById("wordGrid");
    const grid = document.getElementById("grid");
    const message = document.getElementById("message");
    const chancesDiv = document.getElementById("chances");
    let selected = [];
    let solvedCount = 0;
    let chances = 4;

    words.forEach(w => {
      const cell = document.createElement("div");
      cell.className = "cell";
      cell.textContent = w;
      cell.onclick = () => toggleSelect(cell, w);
      wordGrid.appendChild(cell);
    });

    function toggleSelect(cell, word) {
      if (cell.classList.contains("solved")) return;
      if (cell.classList.contains("selected")) {
        cell.classList.remove("selected");
        selected = selected.filter(x => x !== word);
      } else {
        if (selected.length < 4) {
          cell.classList.add("selected");
          selected.push(word);
        }
      }
      if (selected.length === 4) checkSelection();
    }

    function checkSelection() {
      let foundCategory = null;
      for (const [cat, data] of Object.entries(categories)) {
        const matches = selected.filter(w => data.words.includes(w));
        if (matches.length === 4) {
          foundCategory = {name:cat, color:data.color};
          break;
        } else if (matches.length === 3) {
          message.textContent = "ðŸ’” One Away!";
          resetSelection();
          return;
        }
      }
      if (foundCategory) {
        message.textContent = "ðŸ’– Correct! Category: " + foundCategory.name;
        Array.from(wordGrid.children).forEach(cell => {
          if (selected.includes(cell.textContent)) {
            cell.remove();
          }
        });
        const row = document.createElement("div");
        row.className = "row " + foundCategory.color;
        row.textContent = foundCategory.name;
        grid.insertBefore(row, wordGrid);

        solvedCount++;
        if (solvedCount === Object.keys(categories).length) {
          document.getElementById("winModal").style.display = "flex";
          // Show the win modal after 5 seconds 
          setTimeout(() => { 
            document.getElementById("winModal").style.display = "flex";
          }, 5000);
        }
      } else {
        message.textContent = "âŒ Not a valid group!";
        chances--;
        chancesDiv.textContent = "Chances left: " + chances;
        if (chances === 0) {
          message.textContent = "ðŸ’” Game Over!";
          wordGrid.innerHTML = "";
        }
      }
      resetSelection();
    }

    function resetSelection() {
      Array.from(wordGrid.children).forEach(cell => cell.classList.remove("selected"));
      selected = [];
    }

    function goToMemories() {
      window.location.href = "splash.html";
    }
  </script>
</body>
</html>


